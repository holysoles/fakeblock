{"ast":null,"code":"var __jsx = React.createElement;\nimport { useRouter } from \"next/router\";\nimport React from \"react\";\nimport HeaderBar from \"../../components/nav/HeaderBar\"; //import { Typography } from \"@material-ui/core/Typography\";\n\nimport MakeVideoPlayer from \"../../components/Posts/MakeVideoPlayer\";\nimport GetVideos from \"../../components/Videos/GetVideos\";\nimport GetTrueVideoSource from \"../../components/Posts/GetTrueVideoSource\";\nimport Card from \"@material-ui/core/Card\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport Typography from \"@material-ui/core/Typography\";\nimport CardActions from \"@material-ui/core/CardActions\";\nimport Button from \"@material-ui/core/Button\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nconst useStyles = makeStyles({\n  root: {\n    maxWidth: 750,\n    'margin': '4%'\n  }\n});\nexport async function getServerSideProps(context) {\n  let page = context.query.page;\n  let videoArray = await GetVideos(page);\n  const videos = await Promise.all(videoArray.map(async videoPost => {\n    console.log(videoPost);\n    const url = videoPost.node.url;\n    const trueUrl = await GetTrueVideoSource(url);\n    const timestamp = new Date(parseInt(videoPost.node['publish_time']) * 1000).toLocaleString();\n    const plays = videoPost.node['play_count'];\n    const text = videoPost.node['savable_description'].text;\n    const cursor = videoPost.cursor;\n    const videoObj = {\n      url: trueUrl,\n      shareUrl: url,\n      timestamp: timestamp,\n      playcount: plays,\n      text: text,\n      cursor: cursor\n    };\n    return videoObj;\n  }));\n  return {\n    props: {\n      videos\n    }\n  };\n}\n\nconst Page = ({\n  videos\n}) => {\n  const router = useRouter();\n  const classes = useStyles();\n  const videoList = videos.map(obj => {\n    return __jsx(Card, {\n      key: obj.url,\n      className: classes.root\n    }, __jsx(MakeVideoPlayer, {\n      source: obj.url\n    }), __jsx(CardContent, null, __jsx(\"div\", null, __jsx(Typography, {\n      gutterBottom: true,\n      variant: \"h6\"\n    }, router.query.page)), __jsx(Typography, {\n      gutterBottom: true,\n      variant: \"body2\",\n      color: \"textSecondary\"\n    }, obj.timestamp), __jsx(Typography, null, obj.text)), __jsx(CardActions, null, __jsx(Button, {\n      size: \"small\",\n      color: \"primary\"\n    }, \"Share\"), __jsx(Button, {\n      size: \"small\",\n      color: \"primary\"\n    }, \"Likes\")));\n  });\n  return __jsx(\"div\", null, __jsx(HeaderBar, null), __jsx(\"div\", null, __jsx(\"div\", {\n    className: \"pagetitle\"\n  }, __jsx(Typography, {\n    align: \"center\",\n    variant: 'h4'\n  }, router.query.page, \"'s Videos\")), __jsx(\"div\", null, videoList)));\n};\n\nexport default Page;","map":null,"metadata":{},"sourceType":"module"}