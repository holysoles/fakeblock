{"ast":null,"code":"import axios from 'axios';\nimport React from \"react\";\nexport default async function GetPosts(page) {\n  const pageurl = 'https://www.facebook.com/' + page + '/posts';\n  const res = await axios.get(pageurl);\n\n  const jsdom = require(\"jsdom\");\n\n  const {\n    JSDOM\n  } = jsdom;\n  const dom = new JSDOM(res.data);\n  const document = dom.window.document;\n  const container = document.getElementById(\"content_container\"); //get facebook id\n\n  const fbID = '211313118876';\n  const jsonUrl = 'https://www.facebook.com/pages_reaction_units/more/?';\n  const firstParams = 'page_id=' + fbID + \"&cursor=\" + '%7B%22timeline_cursor%22%3A%22AQHRJwV4nuSTwyfDZSl0LgxytkDkmfdYa' + 'k-6aqSDndRyQHTQDgoZ0JuNNRX1mGvrUGkAfMP1HoW6HWKJ99uXJCTNw33n3CM-0i5QD1KG8gjLfojwW4Uq1BqbSVEsN1H2260b%22%2C%22' + 'timeline_section_cursor%22%3A%7B%7D%2C%22has_next_page%22%3Atrue%7D' + '&';\n  const params = {\n    'surface': 'www_pages_posts',\n    'unit_count': '8',\n    '__a': '1'\n  };\n  const headers = {\n    //Cookie: 'sb=hFKbXrrPGDwRtTzzWkgXyrtl; fr=1Anotbfe7tnr0lkVj..Bemgoj.7a.AAA.0.0.BenKKh.AWVdaRiy',\n    'Cache-Control': 'no-cache',\n    'User-Agent': \"Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.113 Mobile Safari/537.36\",\n    'Accept': 'application/x-javascript; charset=utf-8',\n    'Accept-Encoding': 'gzip, deflate, br',\n    'Connection': 'close'\n  };\n  const fullUrl = jsonUrl + firstParams + new URLSearchParams(params); //console.log(fullUrl);\n\n  const rawReq = await axios.get(fullUrl, {\n    headers: headers,\n    redirect: 'follow'\n  }); //const reqJson = JSON.parse(rawReq.body);\n\n  console.log(rawReq.test);\n\n  if (container) {\n    const postArray = document.querySelectorAll(\"div[role='article']\"); //console.log(postArray);\n\n    for (const post in postArray) {\n      //console.log(post)\n      return [];\n    }\n  } else {\n    return [];\n  }\n}","map":{"version":3,"sources":["C:/Users/Patrick/PhpstormProjects/fakeblock/components/Business/GetPosts.js"],"names":["axios","React","GetPosts","page","pageurl","res","get","jsdom","require","JSDOM","dom","data","document","window","container","getElementById","fbID","jsonUrl","firstParams","params","headers","fullUrl","URLSearchParams","rawReq","redirect","console","log","test","postArray","querySelectorAll","post"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,eAAe,eAAeC,QAAf,CAAwBC,IAAxB,EAA6B;AAExC,QAAMC,OAAO,GAAG,8BAA8BD,IAA9B,GAAqC,QAArD;AACA,QAAME,GAAG,GAAG,MAAML,KAAK,CAACM,GAAN,CAAUF,OAAV,CAAlB;;AACA,QAAMG,KAAK,GAAGC,OAAO,CAAC,OAAD,CAArB;;AACA,QAAM;AAAEC,IAAAA;AAAF,MAAYF,KAAlB;AACA,QAAMG,GAAG,GAAG,IAAID,KAAJ,CAAUJ,GAAG,CAACM,IAAd,CAAZ;AACA,QAAMC,QAAQ,GAAGF,GAAG,CAACG,MAAJ,CAAWD,QAA5B;AACA,QAAME,SAAS,GAAGF,QAAQ,CAACG,cAAT,CAAwB,mBAAxB,CAAlB,CARwC,CASxC;;AACA,QAAMC,IAAI,GAAG,cAAb;AAEA,QAAMC,OAAO,GAAG,sDAAhB;AACA,QAAMC,WAAW,GAAG,aAAWF,IAAX,GAAgB,UAAhB,GAA4B,iEAA5B,GAChB,8GADgB,GAEhB,qEAFgB,GAEuD,GAF3E;AAGA,QAAMG,MAAM,GAAG;AACX,eAAW,iBADA;AAEX,kBAAc,GAFH;AAGX,WAAO;AAHI,GAAf;AAKA,QAAMC,OAAO,GAAG;AACZ;AACA,qBAAiB,UAFL;AAGZ,kBAAc,yIAHF;AAIZ,cAAU,yCAJE;AAKZ,uBAAmB,mBALP;AAMZ,kBAAc;AANF,GAAhB;AAQA,QAAMC,OAAO,GAAGJ,OAAO,GAAGC,WAAV,GAAwB,IAAII,eAAJ,CAAoBH,MAApB,CAAxC,CA7BwC,CA8BxC;;AACA,QAAMI,MAAM,GAAG,MAAMvB,KAAK,CAACM,GAAN,CAAUe,OAAV,EAAkB;AAACD,IAAAA,OAAO,EAAEA,OAAV;AAAmBI,IAAAA,QAAQ,EAAE;AAA7B,GAAlB,CAArB,CA/BwC,CAgCxC;;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAYH,MAAM,CAACI,IAAnB;;AAEA,MAAGb,SAAH,EAAc;AACV,UAAMc,SAAS,GAAGhB,QAAQ,CAACiB,gBAAT,CAA0B,qBAA1B,CAAlB,CADU,CAEV;;AACA,SAAK,MAAMC,IAAX,IAAmBF,SAAnB,EAA8B;AAC1B;AACA,aAAO,EAAP;AACH;AACJ,GAPD,MAQI;AACI,WAAO,EAAP;AACP;AACJ","sourcesContent":["import axios from 'axios';\r\nimport React from \"react\";\r\n\r\nexport default async function GetPosts(page){\r\n\r\n    const pageurl = 'https://www.facebook.com/' + page + '/posts';\r\n    const res = await axios.get(pageurl);\r\n    const jsdom = require(\"jsdom\");\r\n    const { JSDOM } = jsdom;\r\n    const dom = new JSDOM(res.data);\r\n    const document = dom.window.document;\r\n    const container = document.getElementById(\"content_container\");\r\n    //get facebook id\r\n    const fbID = '211313118876';\r\n\r\n    const jsonUrl = 'https://www.facebook.com/pages_reaction_units/more/?';\r\n    const firstParams = 'page_id='+fbID+\"&cursor=\"+ '%7B%22timeline_cursor%22%3A%22AQHRJwV4nuSTwyfDZSl0LgxytkDkmfdYa' +\r\n        'k-6aqSDndRyQHTQDgoZ0JuNNRX1mGvrUGkAfMP1HoW6HWKJ99uXJCTNw33n3CM-0i5QD1KG8gjLfojwW4Uq1BqbSVEsN1H2260b%22%2C%22' +\r\n        'timeline_section_cursor%22%3A%7B%7D%2C%22has_next_page%22%3Atrue%7D' +'&';\r\n    const params = {\r\n        'surface': 'www_pages_posts',\r\n        'unit_count': '8',\r\n        '__a': '1'\r\n    };\r\n    const headers = {\r\n        //Cookie: 'sb=hFKbXrrPGDwRtTzzWkgXyrtl; fr=1Anotbfe7tnr0lkVj..Bemgoj.7a.AAA.0.0.BenKKh.AWVdaRiy',\r\n        'Cache-Control': 'no-cache',\r\n        'User-Agent': \"Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.113 Mobile Safari/537.36\",\r\n        'Accept': 'application/x-javascript; charset=utf-8',\r\n        'Accept-Encoding': 'gzip, deflate, br',\r\n        'Connection': 'close'\r\n    };\r\n    const fullUrl = jsonUrl + firstParams + new URLSearchParams(params);\r\n    //console.log(fullUrl);\r\n    const rawReq = await axios.get(fullUrl,{headers: headers, redirect: 'follow'});\r\n    //const reqJson = JSON.parse(rawReq.body);\r\n    console.log(rawReq.test);\r\n\r\n    if(container) {\r\n        const postArray = document.querySelectorAll(\"div[role='article']\");\r\n        //console.log(postArray);\r\n        for (const post in postArray) {\r\n            //console.log(post)\r\n            return []\r\n        }\r\n    }\r\n    else{\r\n            return []\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}