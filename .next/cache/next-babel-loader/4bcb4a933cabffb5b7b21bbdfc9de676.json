{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\Patrick\\\\PhpstormProjects\\\\fakeblock\\\\pages\\\\fb\\\\public\\\\[search].js\";\n\nvar __jsx = React.createElement;\nimport React from 'react';\nimport { useRouter } from 'next/router';\nimport Header from \"../../../components/Header\";\nimport GetSearch from \"../../../components/getSearch\";\n\nfunction getServerSideProps(props) {\n  var query, searchUrl;\n  return _regeneratorRuntime.async(function getServerSideProps$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          //make and await axios request on public search page\n          query = props.query;\n\n          if (!(query === undefined)) {\n            _context.next = 3;\n            break;\n          }\n\n          return _context.abrupt(\"return\");\n\n        case 3:\n          console.log(\"searchquery: \", query);\n          searchUrl = 'http://www.facebook.com/public/' + query;\n          fetch(searchUrl).then(function (res) {\n            res.text().then(function (htmlText) {\n              var parser = new DOMParser();\n              var htmlDoc = parser.parseFromString(htmlText, 'text/html');\n\n              if (htmlDoc !== null) {\n                //Results list is hidden element on Dom as string (lazy loading?) need to parse\n                var textUnformatted = htmlDoc.getElementById(\"u_0_n\").innerHTML;\n                var textFormatted = textUnformatted.replace(\"<!-- \", \"\");\n                var resultsContainer = parser.parseFromString(textFormatted, 'text/html');\n                var resultsArray = resultsContainer.getElementsByClassName(\"_2ial\"); //console.log(resultsArray);\n\n                return resultsArray;\n              }\n            });\n          });\n\n        case 6:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}\n\nvar Page = function Page() {\n  var router = useRouter();\n  return __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 9\n    }\n  }, __jsx(Header, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 13\n    }\n  }), __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 17\n    }\n  }, \"Search Results:\"), \"GetServerSideProps(router.query.search)\"));\n};\n\nexport default Page;","map":{"version":3,"sources":["C:/Users/Patrick/PhpstormProjects/fakeblock/pages/fb/public/[search].js"],"names":["React","useRouter","Header","GetSearch","getServerSideProps","props","query","undefined","console","log","searchUrl","fetch","then","res","text","htmlText","parser","DOMParser","htmlDoc","parseFromString","textUnformatted","getElementById","innerHTML","textFormatted","replace","resultsContainer","resultsArray","getElementsByClassName","Page","router"],"mappings":";;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,SAAT,QAA0B,aAA1B;AACA,OAAOC,MAAP,MAAmB,4BAAnB;AACA,OAAOC,SAAP,MAAsB,+BAAtB;;AAEA,SAAeC,kBAAf,CAAkCC,KAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AACI;AACIC,UAAAA,KAFR,GAEgBD,KAAK,CAACC,KAFtB;;AAAA,gBAGOA,KAAK,KAAKC,SAHjB;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAMIC,UAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ,EAA4BH,KAA5B;AACMI,UAAAA,SAPV,GAOsB,oCAAmCJ,KAPzD;AASIK,UAAAA,KAAK,CAACD,SAAD,CAAL,CAAiBE,IAAjB,CAAsB,UAACC,GAAD,EAAO;AACzBA,YAAAA,GAAG,CAACC,IAAJ,GAAWF,IAAX,CAAgB,UAACG,QAAD,EAAY;AACxB,kBAAIC,MAAM,GAAG,IAAIC,SAAJ,EAAb;AACA,kBAAIC,OAAO,GAAGF,MAAM,CAACG,eAAP,CAAuBJ,QAAvB,EAAiC,WAAjC,CAAd;;AACA,kBAAGG,OAAO,KAAK,IAAf,EAAoB;AAChB;AACA,oBAAIE,eAAe,GAAGF,OAAO,CAACG,cAAR,CAAuB,OAAvB,EAAgCC,SAAtD;AACA,oBAAIC,aAAa,GAAGH,eAAe,CAACI,OAAhB,CAAwB,OAAxB,EAAgC,EAAhC,CAApB;AACA,oBAAIC,gBAAgB,GAAGT,MAAM,CAACG,eAAP,CAAuBI,aAAvB,EAAsC,WAAtC,CAAvB;AACA,oBAAIG,YAAY,GAAGD,gBAAgB,CAACE,sBAAjB,CAAwC,OAAxC,CAAnB,CALgB,CAOhB;;AACA,uBAAOD,YAAP;AACH;AACJ,aAbD;AAcH,WAfD;;AATJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AA6BA,IAAME,IAAI,GAAG,SAAPA,IAAO,GAAM;AACf,MAAMC,MAAM,GAAG5B,SAAS,EAAxB;AAEA,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,MAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,EAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBADJ,4CAFJ,CADJ;AASH,CAZD;;AAcA,eAAe2B,IAAf","sourcesContent":["import React from 'react'\r\nimport { useRouter } from 'next/router';\r\nimport Header from \"../../../components/Header\";\r\nimport GetSearch from \"../../../components/getSearch\"\r\n\r\nasync function getServerSideProps(props) {\r\n    //make and await axios request on public search page\r\n    let query = props.query;\r\n    if(query === undefined){\r\n        return\r\n    }\r\n    console.log(\"searchquery: \",query)\r\n    const searchUrl = 'http://www.facebook.com/public/'+ query;\r\n\r\n    fetch(searchUrl).then((res)=>{\r\n        res.text().then((htmlText)=>{\r\n            var parser = new DOMParser();\r\n            var htmlDoc = parser.parseFromString(htmlText, 'text/html');\r\n            if(htmlDoc !== null){\r\n                //Results list is hidden element on Dom as string (lazy loading?) need to parse\r\n                var textUnformatted = htmlDoc.getElementById(\"u_0_n\").innerHTML;\r\n                var textFormatted = textUnformatted.replace(\"<!-- \",\"\");\r\n                var resultsContainer = parser.parseFromString(textFormatted, 'text/html');\r\n                var resultsArray = resultsContainer.getElementsByClassName(\"_2ial\")\r\n\r\n                //console.log(resultsArray);\r\n                return resultsArray\r\n            }\r\n        });\r\n    });\r\n}\r\n\r\n\r\n\r\nconst Page = () => {\r\n    const router = useRouter();\r\n\r\n    return (\r\n        <div>\r\n            <Header />\r\n            <div>\r\n                <div>Search Results:</div>\r\n                GetServerSideProps(router.query.search)\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Page;"]},"metadata":{},"sourceType":"module"}